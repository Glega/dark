<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="style/style.css">
<title>Камень, ножницы, бумага и два пистолетика!</title>
<script language="javascript">

 function sendData(data, callBack){
	var body = 'login=' + encodeURIComponent(data.login) +'&pass=' + encodeURIComponent(data.pass);
	var xhr = new XMLHttpRequest();
	xhr.open('POST', './signIn', true);

	xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
	xhr.setRequestHeader('Access-Control-Allow-Origin', './signIn');

	xhr.onreadystatechange = function() {
  		if (this.readyState != 4) return;
  		//alert("Message = " + this.responseText);
		//callBack.apply(this, [this.responseText]);

        var rsp = JSON.parse(this.responseText);

        console.log(rsp.response);

		if(rsp.response != "error"){            //if user and password correct
		    document.location.href = "./game";  //surf to game

		}else{                                  //Fuck! This error!
		    confirm("Ошибка овторизации!!!");
		}
	}
	xhr.send(body);
}

function enter(){

 var elem = document.getElementById("username");
 var login = elem.value;
 elem = document.getElementById("password");
 var password = elem.value;


 sendData({"login":login, "pass":password}, responseHandler);

}

function showError(){



}

function responseHandler(message){

    alert(message);


}



</script>

<style type="text/css">
body {
background-color:BlanchedAlmond;
}
.fon_scroll {
margin:0 auto;
width:700px;
height:800px;
padding:30px;
background-color:#ffffff;
background-image:url(../img/underconstruction.jpg);
background-repeat:no-repeat;
background-attachment:fixed;
background-position:-150px 0px;
}
</style>

</head>


<body class = "fon_scroll">

	<div><h1 style="color:yellow">Камень ножницы и два ствола</h1></div>

    <form id="login">

        <fieldset id="inputs">
            <input id="username" type="text" placeholder="Логин" autofocus required>
            <input id="password" type="password" placeholder="Пароль" required>

        </fieldset>
        <fieldset id="actions">
            <input type="button" id="submit" value="ВОЙТИ" onClick="enter()">
            <a href="">Забыли пароль?</a><a href="/register.html">Регистрация</a>
        </fieldset>
    </form>
</body>

</html>